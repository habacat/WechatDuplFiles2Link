# DuplFiles2Link

一个用于查找重复文件并用硬链接或软链接替换它们的 Golang 工具。特别针对微信文件夹进行了优化。

## 功能特点

1. 自动查找微信文件夹 (%userprofile%\Documents\WeChat Files)
2. 支持手动输入微信文件夹路径
3. 支持硬链接和软链接两种模式
4. 使用 MD5 和 SHA256 双重校验以确保文件真正相同
5. 并行处理以提高性能
6. 保留原始文件名
7. 详细的日志输出与进度条显示
8. 可以保存处理状态，支持中断后继续处理
9. 处理完成后生成详细的结果报告

## 组件结构

本程序分为两个部分：

1. **duplfiles2link.go**: 核心组件，提供文件去重和链接功能
2. **main.go**: 主程序，专门处理微信文件夹，提供进度条和日志功能

## 使用方法

### 直接运行

```
go run main.go
```

或者构建后运行：

```
go build
./duplfiles2link
```

### 使用流程

1. 程序会自动查找微信文件夹路径
2. 如果未找到，会提示手动输入路径
3. 选择链接类型（硬链接或软链接）
4. 程序会显示进度条和详细日志，开始处理文件
5. 处理完成后会保存结果到 JSON 文件

## 中断与恢复

如果处理过程中被中断（例如按下 Ctrl+C 或者关闭程序），程序会自动保存当前状态。下次启动时会自动加载之前的状态并继续处理。

## 注意事项

1. 硬链接和软链接模式都需要管理员权限
2. 程序会自动检测权限，如果不够，会提示是否以管理员身份重新运行
3. 处理大量文件可能需要较长时间，请耐心等待

## 构建方法

```
go mod tidy
go build
```

## 日志和结果

- 程序运行日志保存在 `duplfiles2link.log`
- 处理结果保存在 `duplfiles2link_results.json`
- 处理状态保存在 `duplfiles2link_state.dat`